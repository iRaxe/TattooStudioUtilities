import{r as m,j as e,B as v}from"./index-CFS5meP2.js";/* empty css                          */const L=[{key:"hemophilia",label:"Emofilia"},{key:"diabetes",label:"Diabete mellito"},{key:"hepatitis",label:"Epatite (A, B, C, D, E, F)"},{key:"hiv",label:"HIV"},{key:"skinDiseases",label:"Malattie della pelle"},{key:"eczema",label:"Eczema"},{key:"allergies",label:"Allergie (specificare)"},{key:"autoimmune",label:"Malattie autoimmuni"},{key:"herpes",label:"E' o e' stato predisposto all'herpes"},{key:"infectiousDiseases",label:"Malattie infettive o febbre alta (al momento del trattamento)"},{key:"epilepsy",label:"Epilessia"},{key:"cardiovascular",label:"Problemi cardiovascolari"},{key:"anticoagulants",label:"Assume o ha assunto anticoagulanti"},{key:"pregnancy",label:"E' in stato di gravidanza"},{key:"regularMedication",label:"Assume regolarmente medicine"},{key:"pacemaker",label:"Ha un pacemaker"},{key:"woundHealingIssues",label:"Problemi di cicatrizzazione delle ferite"},{key:"alcoholOrDrugs24h",label:"Ha assunto alcol o droghe nelle ultime 24 ore"},{key:"medicalProcedures24h",label:"Ha subito interventi medici nelle ultime 24 ore"},{key:"other",label:"Altro"}],T=()=>({date:"",effect:""}),A=6,I=()=>({subscriberTitle:"Il sottoscritto",fullName:"",birthCity:"",birthProvince:"",birthDate:"",residenceCity:"",residenceProvince:"",postalCode:"",residenceStreet:"",residenceNumber:"",phoneNumber:"",email:"",documentType:"",documentNumber:"",documentIssuer:"",fiscalCode:"",instagramAccount:"",consentDate:"",colorTestArea:"",colorTestDate:"",colorTestChoice:"authorize_without_test",treatmentSessions:[T()],healthSurvey:{hemophilia:"",diabetes:"",hepatitis:"",hiv:"",skinDiseases:"",eczema:"",allergies:"",allergyNotes:"",autoimmune:"",herpes:"",infectiousDiseases:"",epilepsy:"",cardiovascular:"",anticoagulants:"",pregnancy:"",regularMedication:"",pacemaker:"",woundHealingIssues:"",alcoholOrDrugs24h:"",medicalProcedures24h:"",other:"",otherNotes:""},otherHealthNotes:"",hasCoverUp:!1,coverUpAcknowledgement:!1,coverUpNotes:"",isMinorClient:!1,guardianFirstName:"",guardianLastName:"",guardianDocumentType:"",guardianDocumentNumber:"",guardianRelationship:"",guardianAcknowledgement:!1,consentInformation:!1,consentRisks:!1,consentAftercare:!1,consentMultipleSessions:!1,consentColorChanges:!1,consentTimeGap:!1,consentLiability:!1,privacyConsent:!1,photoConsent:!1});function E({onClose:t,onSave:p,existingSignature:f}){const g=m.useRef(null),h=m.useRef(null),b=m.useRef(!1);m.useEffect(()=>{const s=g.current;if(!s)return;const o=s.getContext("2d");if(o.lineCap="round",o.lineJoin="round",o.lineWidth=2,o.strokeStyle="#000000",o.fillStyle="#ffffff",o.fillRect(0,0,s.width,s.height),f){const l=new Image;l.onload=()=>{o.drawImage(l,0,0,s.width,s.height)},l.src=f}h.current=o},[f]);const C=s=>{const o=g.current;if(!o)return{x:0,y:0};const l=o.getBoundingClientRect();if(s.touches&&s.touches[0]){const x=s.touches[0];return{x:x.clientX-l.left,y:x.clientY-l.top}}return{x:s.clientX-l.left,y:s.clientY-l.top}},y=s=>{s.preventDefault();const o=h.current;if(!o)return;const{x:l,y:x}=C(s);o.beginPath(),o.moveTo(l,x),b.current=!0},k=s=>{if(!b.current)return;s.preventDefault();const o=h.current;if(!o)return;const{x:l,y:x}=C(s);o.lineTo(l,x),o.stroke()},a=s=>{if(!b.current)return;s.preventDefault();const o=h.current;o&&(o.closePath(),b.current=!1)},N=()=>{const s=g.current,o=h.current;!s||!o||(o.clearRect(0,0,s.width,s.height),o.fillStyle="#ffffff",o.fillRect(0,0,s.width,s.height))},_=()=>{const s=g.current;if(!s)return;const o=s.toDataURL("image/png");p(o)};return e.jsx("div",{className:"tattoo-consent-signature-backdrop",children:e.jsxs("div",{className:"tattoo-consent-signature-modal",children:[e.jsx("h2",{className:"tattoo-consent-signature-title",children:"Firma digitale"}),e.jsx("p",{className:"tattoo-consent-signature-instructions",children:`Disegna la tua firma nell'area sottostante utilizzando mouse, touch o penna. Quando sei soddisfatto premi "Salva firma".`}),e.jsx("div",{className:"tattoo-consent-signature-canvas",children:e.jsx("canvas",{ref:g,width:640,height:220,className:"tattoo-consent-signature-canvas__inner",onMouseDown:y,onMouseMove:k,onMouseUp:a,onMouseLeave:a,onTouchStart:y,onTouchMove:k,onTouchEnd:a})}),e.jsxs("div",{className:"tattoo-consent-signature-actions",children:[e.jsx(v,{type:"button",variant:"ghost",onClick:N,className:"tattoo-consent-btn",children:"Cancella"}),e.jsx(v,{type:"button",onClick:_,className:"tattoo-consent-btn tattoo-consent-btn--accent",children:"Salva firma"}),e.jsx(v,{type:"button",variant:"ghost",onClick:t,className:"tattoo-consent-btn tattoo-consent-btn--ghost tattoo-consent-btn--align-end",children:"Annulla"})]})]})})}function q(){const[t,p]=m.useState(()=>I()),[f,g]=m.useState(!1),[h,b]=m.useState(null),[C,y]=m.useState(!1);m.useEffect(()=>{t.isMinorClient||p(n=>({...n,guardianFirstName:"",guardianLastName:"",guardianDocumentType:"",guardianDocumentNumber:"",guardianRelationship:"",guardianAcknowledgement:!1}))},[t.isMinorClient]);const k=m.useMemo(()=>{const n=j=>(j||"").trim(),i=(t.phoneNumber||"").replace(/\D/g,"").trim(),c=n(t.subscriberTitle)&&n(t.fullName)&&n(t.birthCity)&&n(t.birthProvince)&&t.birthDate&&n(t.documentType)&&n(t.documentIssuer)&&n(t.documentNumber)&&n(t.residenceCity)&&n(t.residenceProvince)&&n(t.residenceStreet)&&n(t.residenceNumber)&&i,r=t.consentInformation&&t.consentRisks&&t.consentAftercare&&t.consentMultipleSessions&&t.consentColorChanges&&t.consentTimeGap&&t.consentLiability&&t.privacyConsent;return!c||!r||!!!h?!1:t.isMinorClient?n(t.guardianFirstName)&&n(t.guardianLastName)&&n(t.guardianDocumentType)&&n(t.guardianDocumentNumber)&&n(t.guardianRelationship)&&t.guardianAcknowledgement:!0},[t,h]),a=n=>{const{name:i,value:c,type:r,checked:u}=n.target;p(j=>({...j,[i]:r==="checkbox"?u:c}))},N=(n,i)=>{p(c=>({...c,healthSurvey:{...c.healthSurvey,[n]:i}}))},_=(n,i,c)=>{p(r=>{const u=r.treatmentSessions.map((j,z)=>z!==n?j:{...j,[i]:c});return{...r,treatmentSessions:u}})},s=()=>{p(n=>n.treatmentSessions.length>=A?n:{...n,treatmentSessions:[...n.treatmentSessions,T()]})},o=n=>{p(i=>{if(i.treatmentSessions.length<=1)return i;const c=i.treatmentSessions.filter((r,u)=>u!==n);return{...i,treatmentSessions:c.length>0?c:[T()]}})},l=n=>{b(n),g(!1)},x=()=>{p(I()),b(null)},M=()=>{const n=(t.phoneNumber||"").replace(/\D/g,"").trim(),i=[t.residenceStreet,t.residenceNumber].map(d=>(d||"").trim()).filter(Boolean).join(" "),c=(t.fullName||"").trim(),[r="",...u]=c.split(/\s+/).filter(Boolean),j=u.join(" ").trim()||r,z=Object.entries(t.healthSurvey).reduce((d,[S,D])=>S==="allergyNotes"||S==="otherNotes"?(d[S]=D||null,d):D===""?(d[S]=null,d):(d[S]=D==="yes",d),{}),R=t.treatmentSessions.map(d=>({date:d.date||null,effect:d.effect||null})).filter(d=>d.date||d.effect),w={type:"trucco_permanente",formType:"trucco_permanente",subscriberTitle:t.subscriberTitle,firstName:r,lastName:j,fullName:c,birthDate:t.birthDate,birthCity:t.birthCity.trim(),birthProvince:t.birthProvince.trim(),birthPlace:t.birthProvince?`${t.birthCity} (${t.birthProvince})`:t.birthCity,fiscalCode:t.fiscalCode.trim(),instagramAccount:t.instagramAccount.trim(),phone:n,phoneNumber:t.phoneNumber.trim(),email:t.email.trim(),documentType:t.documentType.trim(),documentNumber:t.documentNumber.trim(),documentIssuer:t.documentIssuer.trim(),consentDate:t.consentDate||null,address:i||null,residenceStreet:t.residenceStreet.trim(),residenceNumber:t.residenceNumber.trim(),residenceCity:t.residenceCity.trim(),residenceProvince:t.residenceProvince.trim(),postalCode:t.postalCode.trim(),colorTestArea:t.colorTestArea.trim(),colorTestDate:t.colorTestDate||null,colorTestChoice:t.colorTestChoice,treatmentSessions:R,healthSurvey:z,otherHealthNotes:t.otherHealthNotes.trim(),hasCoverUp:t.hasCoverUp,coverUpAcknowledgement:t.coverUpAcknowledgement,coverUpNotes:t.coverUpNotes.trim(),isMinorClient:t.isMinorClient,statements:{consentInformation:t.consentInformation,consentRisks:t.consentRisks,consentAftercare:t.consentAftercare,consentMultipleSessions:t.consentMultipleSessions,consentColorChanges:t.consentColorChanges,consentTimeGap:t.consentTimeGap,consentLiability:t.consentLiability},privacyConsent:t.privacyConsent,photoConsent:t.photoConsent,acceptPrivacy:t.privacyConsent,consentDataProcessing:t.privacyConsent,consentPublication:t.photoConsent,submittedAt:new Date().toISOString(),signature:h};return t.isMinorClient&&(w.guardian={firstName:t.guardianFirstName.trim(),lastName:t.guardianLastName.trim(),documentType:t.guardianDocumentType.trim(),documentNumber:t.guardianDocumentNumber.trim(),relationship:t.guardianRelationship.trim(),acknowledgement:t.guardianAcknowledgement}),w},P=async n=>{if(n.preventDefault(),!k){window.alert("Completa tutti i campi obbligatori e assicurati di aver firmato il modulo.");return}const i=M();if(!i.firstName||!i.lastName){window.alert("Inserisci nome e cognome validi.");return}if(!i.phone){window.alert("Inserisci un numero di telefono valido (solo cifre).");return}y(!0);try{const c=await fetch("/api/consenso/trucco-permanente",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),r=await c.json().catch(()=>({}));if(!c.ok){const u=(r==null?void 0:r.error)||(r==null?void 0:r.message)||"Si e verificato un errore durante il salvataggio del consenso.";throw new Error(u)}window.alert("Consenso registrato correttamente. Grazie per la collaborazione!"),x()}catch(c){console.error("Errore durante il salvataggio del consenso trucco permanente:",c),window.alert(c.message||"Errore durante il salvataggio del consenso. Riprova piu tardi.")}finally{y(!1)}};return e.jsxs("div",{className:"main-container",children:[e.jsxs("div",{className:"glass-card tattoo-consent-card",children:[e.jsx("header",{className:"tattoo-consent-header",children:e.jsx("p",{className:"tattoo-consent-subtitle",children:"Compila ogni sezione con attenzione. Le informazioni raccolte ci permettono di garantire un trattamento sicuro e personalizzato nel rispetto della normativa vigente."})}),e.jsxs("form",{className:"tattoo-consent-form",onSubmit:P,children:[e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"01"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Dati del dichiarante"})]}),e.jsxs("div",{className:"tattoo-consent-grid tattoo-consent-grid--responsive-four",children:[e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Il/La sottoscritto/a *"}),e.jsxs("select",{name:"subscriberTitle",value:t.subscriberTitle,onChange:a,required:!0,children:[e.jsx("option",{value:"Il sottoscritto",children:"Il sottoscritto"}),e.jsx("option",{value:"La sottoscritta",children:"La sottoscritta"}),e.jsx("option",{value:"Il/La sottoscritto/a",children:"Il/La sottoscritto/a"})]})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Nome e cognome *"}),e.jsx("input",{name:"fullName",value:t.fullName,onChange:a,placeholder:"Nome e cognome",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Nato/a a *"}),e.jsx("input",{name:"birthCity",value:t.birthCity,onChange:a,placeholder:"Citta di nascita",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Provincia (sigla) *"}),e.jsx("input",{name:"birthProvince",value:t.birthProvince,onChange:a,placeholder:"Es. NA",maxLength:2,required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Data di nascita *"}),e.jsx("input",{type:"date",name:"birthDate",value:t.birthDate,onChange:a,title:"gg/mm/aaaa",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Residente a *"}),e.jsx("input",{name:"residenceCity",value:t.residenceCity,onChange:a,placeholder:"Comune di residenza",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Provincia di residenza *"}),e.jsx("input",{name:"residenceProvince",value:t.residenceProvince,onChange:a,placeholder:"Es. NA",maxLength:2,required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Via *"}),e.jsx("input",{name:"residenceStreet",value:t.residenceStreet,onChange:a,placeholder:"Via/Piazza",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Nr. civico *"}),e.jsx("input",{name:"residenceNumber",value:t.residenceNumber,onChange:a,placeholder:"Numero",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Numero di cellulare *"}),e.jsx("input",{name:"phoneNumber",value:t.phoneNumber,onChange:a,placeholder:"+39 ...",inputMode:"tel",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Email"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:a,placeholder:"Indirizzo email (facoltativo)"})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Tipo di documento *"}),e.jsx("input",{name:"documentType",value:t.documentType,onChange:a,placeholder:"Carta di identita / Passaporto ...",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Rilasciato da *"}),e.jsx("input",{name:"documentIssuer",value:t.documentIssuer,onChange:a,placeholder:"Comune / Questura ...",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Numero documento *"}),e.jsx("input",{name:"documentNumber",value:t.documentNumber,onChange:a,placeholder:"Numero documento",required:!0})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Codice fiscale"}),e.jsx("input",{name:"fiscalCode",value:t.fiscalCode,onChange:a,placeholder:"Codice fiscale"})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Account Instagram"}),e.jsx("input",{name:"instagramAccount",value:t.instagramAccount,onChange:a,placeholder:"@nomeutente"})]})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"02"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Cliente minorenne"})]}),e.jsx("div",{className:"tattoo-consent-checklist",children:e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"isMinorClient",checked:t.isMinorClient,onChange:a}),e.jsx("span",{children:"il cliente che si sottopone al trattamento è minorenne"})]})}),t.isMinorClient&&e.jsxs("div",{className:"tattoo-consent-grid tattoo-consent-grid--two tattoo-consent-grid--minor",children:[e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Nome del tutore *"}),e.jsx("input",{name:"guardianFirstName",value:t.guardianFirstName,onChange:a,placeholder:"Nome del genitore o tutore",required:t.isMinorClient})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Cognome del tutore *"}),e.jsx("input",{name:"guardianLastName",value:t.guardianLastName,onChange:a,placeholder:"Cognome del genitore o tutore",required:t.isMinorClient})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Documento di riconoscimento *"}),e.jsx("input",{name:"guardianDocumentType",value:t.guardianDocumentType,onChange:a,placeholder:"Tipo documento",required:t.isMinorClient})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Numero documento *"}),e.jsx("input",{name:"guardianDocumentNumber",value:t.guardianDocumentNumber,onChange:a,placeholder:"Numero documento",required:t.isMinorClient})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Relazione con il minore *"}),e.jsx("input",{name:"guardianRelationship",value:t.guardianRelationship,onChange:a,placeholder:"Padre, madre, tutore legale...",required:t.isMinorClient})]}),e.jsxs("label",{className:"tattoo-consent-checkbox tattoo-consent-checkbox--inline",children:[e.jsx("input",{type:"checkbox",name:"guardianAcknowledgement",checked:t.guardianAcknowledgement,onChange:a}),e.jsx("span",{children:"Confermo di essere stato informato sui rischi e autorizzo il trattamento sul minore indicato *"})]})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"03"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Informazioni sul trattamento"})]}),e.jsx("div",{className:"tattoo-consent-text",children:e.jsx("p",{children:"Il trucco permanente prevede l'inserimento sottocutaneo di pigmenti. Confermando le caselle seguenti dichiari di aver compreso rischi, modalita operative, necessita delle sedute di ritocco e istruzioni per la corretta guarigione."})}),e.jsxs("div",{className:"tattoo-consent-checklist",children:[e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentInformation",checked:t.consentInformation,onChange:a}),e.jsx("span",{children:"Dichiaro di aver letto e compreso l'informativa riguardante natura, implicazioni e possibili rischi del trucco permanente *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentRisks",checked:t.consentRisks,onChange:a}),e.jsx("span",{children:"Sono consapevole di possibili reazioni allergiche, cicatrizzazioni anomale, migrazione o variazione dei pigmenti nel tempo *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentAftercare",checked:t.consentAftercare,onChange:a}),e.jsx("span",{children:"Mi impegno a seguire scrupolosamente le istruzioni post trattamento per favorire una corretta cicatrizzazione *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentMultipleSessions",checked:t.consentMultipleSessions,onChange:a}),e.jsx("span",{children:"Accetto che per ottenere un risultato ottimale sono necessarie almeno due sedute e che eventuali ritocchi aggiuntivi potranno essere a pagamento *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentColorChanges",checked:t.consentColorChanges,onChange:a}),e.jsx("span",{children:"Sono consapevole che tonalita e forma possono modificarsi nel tempo in base a fattori personali e ambientali *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentTimeGap",checked:t.consentTimeGap,onChange:a}),e.jsx("span",{children:"Accetto che tra una seduta e la successiva debbano trascorrere almeno 40 giorni e che non e possibile anticipare questo intervallo *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"consentLiability",checked:t.consentLiability,onChange:a}),e.jsx("span",{children:"Sollevo l'operatore da responsabilita per risultati non ottimali derivanti dal mancato rispetto delle indicazioni ricevute o dal rifiuto di sedute di ritocco necessarie *"})]})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"04"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Sessioni di trattamento"})]}),e.jsx("div",{className:"tattoo-consent-grid tattoo-consent-grid--one",children:t.treatmentSessions.map((n,i)=>e.jsxs("div",{className:"tattoo-consent-session",children:[e.jsxs("div",{className:"tattoo-consent-session__header",children:[e.jsxs("h3",{children:["Sessione ",i+1]}),i>0&&e.jsx(v,{type:"button",variant:"ghost",className:"tattoo-consent-btn tattoo-consent-session__remove",onClick:()=>o(i),children:"Rimuovi"})]}),e.jsxs("div",{className:"tattoo-consent-grid tattoo-consent-grid--two",children:[e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Data"}),e.jsx("input",{type:"date",value:n.date,onChange:c=>_(i,"date",c.target.value)})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Effetto"}),e.jsx("input",{value:n.effect,onChange:c=>_(i,"effect",c.target.value),placeholder:"Es. sopracciglia pelo a pelo"})]})]})]},`session-${i}`))}),e.jsx("div",{className:"tattoo-consent-session-actions",children:e.jsx(v,{type:"button",variant:"secondary",className:"tattoo-consent-btn",onClick:s,disabled:t.treatmentSessions.length>=A,children:"Aggiungi sessione"})})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"05"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Prova colore"})]}),e.jsx("div",{className:"tattoo-consent-text",children:e.jsx("p",{children:"La prova colore e consigliata per valutare eventuali reazioni ai pigmenti. Seleziona l'opzione desiderata e inserisci i dettagli relativi al test o ai prodotti utilizzati."})}),e.jsxs("div",{className:"tattoo-consent-health",children:[e.jsxs("label",{className:"tattoo-consent-radio",children:[e.jsx("input",{type:"radio",name:"colorTestChoice",value:"authorize_without_test",checked:t.colorTestChoice==="authorize_without_test",onChange:a}),e.jsx("span",{children:"Autorizzo l'operatore a procedere senza eseguire la prova colore"})]}),e.jsxs("label",{className:"tattoo-consent-radio",children:[e.jsx("input",{type:"radio",name:"colorTestChoice",value:"request_test",checked:t.colorTestChoice==="request_test",onChange:a}),e.jsx("span",{children:"Richiedo l'esecuzione della prova colore"})]})]}),e.jsxs("div",{className:"tattoo-consent-grid tattoo-consent-grid--two",children:[e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Zona"}),e.jsx("input",{name:"colorTestArea",value:t.colorTestArea,onChange:a,placeholder:"Zona trattata"})]}),e.jsxs("label",{className:"tattoo-consent-field",children:[e.jsx("span",{children:"Data"}),e.jsx("input",{type:"date",name:"colorTestDate",value:t.colorTestDate,onChange:a})]})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"06"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Questionario sullo stato di salute"})]}),e.jsx("div",{className:"tattoo-consent-text",children:e.jsx("p",{children:"Rispondi sinceramente a ogni domanda. Le informazioni sono fondamentali per pianificare il trattamento in sicurezza. In caso di risposte affermative, specifica i dettagli dove richiesto."})}),e.jsx("div",{className:"tattoo-consent-health tattoo-consent-health--questionnaire",children:L.map(n=>e.jsxs("div",{className:"tattoo-consent-health-question",children:[e.jsx("span",{children:n.label}),e.jsxs("div",{className:"tattoo-consent-health-options",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:`health-${n.key}`,value:"yes",checked:t.healthSurvey[n.key]==="yes",onChange:()=>N(n.key,"yes")}),"Si"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:`health-${n.key}`,value:"no",checked:t.healthSurvey[n.key]==="no",onChange:()=>N(n.key,"no")}),"No"]})]}),n.key==="allergies"&&e.jsxs("div",{className:"tattoo-consent-field tattoo-consent-health-notes",children:[e.jsx("span",{children:"Se si, specificare"}),e.jsx("input",{value:t.healthSurvey.allergyNotes,onChange:i=>N("allergyNotes",i.target.value),placeholder:"Allergie note"})]}),n.key==="other"&&e.jsxs("div",{className:"tattoo-consent-field tattoo-consent-health-notes",children:[e.jsx("span",{children:"Dettagli aggiuntivi"}),e.jsx("input",{value:t.healthSurvey.otherNotes,onChange:i=>N("otherNotes",i.target.value),placeholder:"Descrivi altre condizioni rilevanti"})]})]},n.key))}),e.jsxs("label",{className:"tattoo-consent-field tattoo-consent-health-notes",children:[e.jsx("span",{children:"Note aggiuntive per l'operatore"}),e.jsx("textarea",{name:"otherHealthNotes",value:t.otherHealthNotes,onChange:a,placeholder:"Inserisci eventuali informazioni sanitarie aggiuntive",rows:4})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"07"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Cover-up di lavori eseguiti da terzi"})]}),e.jsxs("div",{className:"tattoo-consent-checklist",children:[e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"hasCoverUp",checked:t.hasCoverUp,onChange:a}),e.jsx("span",{children:"il lavoro richiesto è un cover-up di un trucco permanente gia eseguito da terzi"})]}),t.hasCoverUp&&e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"coverUpAcknowledgement",checked:t.coverUpAcknowledgement,onChange:a}),e.jsx("span",{children:"Comprendo che potrebbero essere necessarie piu sedute distanziate di almeno 30 giorni e sollevo l'operatore per esiti non garantiti *"})]})]}),t.hasCoverUp&&e.jsxs("label",{className:"tattoo-consent-field tattoo-consent-health-notes",children:[e.jsx("span",{children:"Dettagli sul lavoro da coprire"}),e.jsx("textarea",{name:"coverUpNotes",value:t.coverUpNotes,onChange:a,placeholder:"Descrivi il lavoro precedente, colori residui, eventuali rimozioni gia effettuate",rows:3})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"08"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Consensi finali"})]}),e.jsxs("div",{className:"tattoo-consent-checklist",children:[e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"privacyConsent",checked:t.privacyConsent,onChange:a}),e.jsx("span",{children:"Acconsento al trattamento dei miei dati personali ai sensi della normativa vigente sulla privacy *"})]}),e.jsxs("label",{className:"tattoo-consent-checkbox",children:[e.jsx("input",{type:"checkbox",name:"photoConsent",checked:t.photoConsent,onChange:a}),e.jsx("span",{children:"Autorizzo l'utilizzo di materiale fotografico realizzato durante il trattamento per finalita promozionali (facoltativo)"})]})]})]}),e.jsxs("section",{className:"tattoo-consent-section",children:[e.jsxs("div",{className:"tattoo-consent-section__header",children:[e.jsx("span",{className:"tattoo-consent-section__badge",children:"09"}),e.jsx("h2",{className:"tattoo-consent-section__title",children:"Firma digitale"})]}),e.jsxs("div",{className:"tattoo-consent-signature",children:[h?e.jsxs("div",{className:"tattoo-consent-signature-preview",children:[e.jsx("p",{children:"Firma salvata. Puoi ridisegnarla se necessario."}),e.jsx("img",{src:h,alt:"Firma digitale"})]}):e.jsx("p",{className:"tattoo-consent-text",children:"Per completare il consenso e richiesta la tua firma digitale. Clicca sul pulsante per disegnarla."}),e.jsx(v,{type:"button",variant:"secondary",onClick:()=>g(!0),className:"tattoo-consent-btn",children:"Disegna firma"})]})]}),e.jsx("div",{className:"tattoo-consent-submit",children:e.jsx(v,{type:"submit",disabled:!k||C,className:"tattoo-consent-btn tattoo-consent-submit__button",children:C?"Invio in corso...":"Invia consenso"})})]})]}),f&&e.jsx(E,{onClose:()=>g(!1),onSave:l,existingSignature:h})]})}export{q as default};
